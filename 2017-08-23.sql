



SELECT TOP 1000 * FROM STOCK

SELECT TOP 1000 * FROM ITMFACILIT
SELECT TOP 1000 * FROM ITMMASTER


SELECT T1.ITMREF_0 N'产品编号',
		T3.ITMDES1_0 N'产品名称',
		T3.STU_0 N'单位',
		ISNULL(T2.QTYSTU_0,0) N'现库存',
		ISNULL(T4.QTY_0,0) N'在途',
		ISNULL(T5.QTY_0,0) N'总订单需求'
FROM ITMFACILIT T1
	LEFT JOIN (SELECT ITMREF_0,STOFCY_0,SUM(QTYSTU_0) QTYSTU_0 FROM STOCK GROUP BY ITMREF_0,STOFCY_0) T2 ON T1.ITMREF_0 = T2.ITMREF_0 AND T1.STOFCY_0 = T2.STOFCY_0
	LEFT JOIN ITMMASTER T3 ON T1.ITMREF_0 = T3.ITMREF_0
	LEFT JOIN (SELECT ITMREF_0,MFGFCY_0,SUM(RMNEXTQTY_0) QTY_0 FROM MFGITM WHERE ITMSTA_0 < 3 AND RMNEXTQTY_0 > 0 GROUP BY ITMREF_0,MFGFCY_0) T4 ON T1.ITMREF_0 = T4.ITMREF_0 AND T1.STOFCY_0 = T4.MFGFCY_0
	LEFT JOIN (SELECT ITMREF_0,STOFCY_0,SUM(QTY_0 - DLVQTY_0) QTY_0 FROM SORDERQ WHERE SOQSTA_0 < 3 AND DLVQTY_0 < QTY_0 GROUP BY ITMREF_0,STOFCY_0) T5 ON T1.ITMREF_0 = T5.ITMREF_0 AND T1.STOFCY_0 = T5.STOFCY_0
WHERE T1.STOFCY_0 = '0201'



SELECT TOP 1000 * 
FROM SORDERQ WHERE SOQSTA_0 < 3 AND DLVQTY_0 < QTY_0

SELECT * FROM STOCK WHERE ITMREF_0 = 'IVN01210060-00'






















